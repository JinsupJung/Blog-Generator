(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{2457:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/new",function(){return t(819)}])},8567:function(e,s,t){"use strict";t.d(s,{L:function(){return m}});var l=t(5893),n=t(3606),a=t(9417),r=t(7814),i=t(5675),o=t.n(i),c=t(1664),d=t.n(c),x=t(7294),u=t(9307),h=t(8773);let m=e=>{let{children:s,availableTokens:t,posts:i,postId:c,postCreated:m}=e,{user:f}=(0,n.aF)(),{setPostsFromSSR:p,posts:j,getPosts:b,noMorePosts:w}=(0,x.useContext)(u.Z);return(0,x.useEffect)(()=>{if(p(i),c){let e=i.find(e=>e._id===c);e||b({getNewerPosts:!0,lastPostDate:m})}},[i,p,c,m,b]),(0,l.jsxs)("div",{className:"grid grid-cols-[300px_1fr] h-screen max-h-screen",children:[(0,l.jsxs)("div",{className:"flex flex-col text-white overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-slate-800 px-2",children:[(0,l.jsx)(h.T,{}),(0,l.jsx)(d(),{href:"/post/new",className:"btn",children:"블로그 작성"}),(0,l.jsxs)(d(),{href:"/token-topup",className:"block mt-2 text-center",children:[(0,l.jsx)(r.G,{icon:a.owJ,className:"text-yellow-500"}),(0,l.jsxs)("span",{className:"pl-1",children:[t," 캐시 "]})]})]}),(0,l.jsxs)("div",{className:"px-4 flex-1 overflow-auto bg-gradient-to-b from-slate-800 to-cyan-800",children:[j.map(e=>(0,l.jsx)(d(),{href:"/post/".concat(e._id),className:"py-1 border border-white/0 block text-ellipsis overflow-hidden whitespace-nowrap my-1 px-2 bg-white/10 cursor-pointer rounded-sm ".concat(c===e._id?"bg-white/20 border-white":""),children:e.topic},e._id)),!w&&(0,l.jsx)("div",{onClick:()=>{b({lastPostDate:j[j.length-1].created})},className:"hover:underline text-sm text-slate-400 text-center cursor-pointer mt-4",children:"Load more posts"})]}),(0,l.jsx)("div",{className:"bg-cyan-800 flex items-center gap-2 border-t border-t-black/50 h-20 px-2",children:f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"min-w-[50px]",children:(0,l.jsx)(o(),{src:f.picture,alt:f.name,height:50,width:50,className:"min-w-[50px] rounded-full"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-bold",children:f.email}),(0,l.jsx)(d(),{className:"text-sm",href:"/api/auth/logout",children:"Logout"})]})]}):(0,l.jsx)(d(),{href:"/api/auth/login",children:"Login"})})]}),s]})}},8773:function(e,s,t){"use strict";t.d(s,{T:function(){return r}});var l=t(5893),n=t(9417),a=t(7814);let r=()=>(0,l.jsxs)("div",{className:"text-2xl text-center py-4 font-heading font-bold",children:["블로그 자동화",(0,l.jsx)(a.G,{icon:n.M_6,className:"ml-1 text-2xl text-slate-400"})]})},819:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return c},default:function(){return d}});var l=t(5893),n=t(9417),a=t(7814),r=t(1163),i=t(7294),o=t(8567),c=!0;function d(e){let s=(0,r.useRouter)(),[t,o]=(0,i.useState)(""),[c,d]=(0,i.useState)(""),[x,u]=(0,i.useState)(!1),h=async e=>{e.preventDefault(),u(!0);try{let e=await fetch("/api/generatePost",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({topic:t,keywords:c})}),l=await e.json();console.log("RESULT: ",l),(null==l?void 0:l.postId)&&s.push("/post/".concat(l.postId))}catch(e){u(!1)}};return(0,l.jsxs)("div",{className:"h-full overflow-hidden",children:[!!x&&(0,l.jsxs)("div",{className:"text-green-500 flex h-full animate-pulse w-full flex-col justify-center items-center",children:[(0,l.jsx)(a.G,{icon:n.qxT,className:"text-8xl"}),(0,l.jsx)("h6",{children:"Generating..."})]}),!x&&(0,l.jsx)("div",{className:"w-full h-full flex flex-col overflow-auto",children:(0,l.jsxs)("form",{onSubmit:h,className:"m-auto w-full max-w-screen-sm bg-slate-100 p-4 rounded-md shadow-xl border border-slate-200 shadow-slate-200",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:(0,l.jsx)("strong",{children:"게시될 블로그의 토픽을 넣어주세요"})}),(0,l.jsx)("textarea",{className:"resize-none border border-slate-500 w-full block my-2 px-4 py-2 rounded-sm",value:t,onChange:e=>o(e.target.value),maxLength:80})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:(0,l.jsx)("strong",{children:"블로그의 키워드를 넣어 주세요"})}),(0,l.jsx)("textarea",{className:"resize-none border border-slate-500 w-full block my-2 px-4 py-2 rounded-sm",value:c,onChange:e=>d(e.target.value),maxLength:80}),(0,l.jsx)("small",{className:"block mb-2",children:"키워드는 콤마로 분리"})]}),(0,l.jsx)("button",{type:"submit",className:"btn",disabled:!t.trim()||!c.trim(),children:"블로그 생성"})]})})]})}d.getLayout=function(e,s){return(0,l.jsx)(o.L,{...s,children:e})}}},function(e){e.O(0,[976,927,774,888,179],function(){return e(e.s=2457)}),_N_E=e.O()}]);