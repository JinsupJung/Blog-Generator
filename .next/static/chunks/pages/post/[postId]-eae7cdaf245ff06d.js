(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[553],{8197:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/[postId]",function(){return t(7834)}])},8567:function(e,s,t){"use strict";t.d(s,{L:function(){return u}});var n=t(5893),l=t(3606),r=t(9417),i=t(7814),o=t(5675),c=t.n(o),a=t(1664),d=t.n(a),x=t(7294),h=t(9307),m=t(8773);let u=e=>{let{children:s,availableTokens:t,posts:o,postId:a,postCreated:u}=e,{user:p}=(0,l.aF)(),{setPostsFromSSR:f,posts:b,getPosts:j,noMorePosts:N}=(0,x.useContext)(h.Z);return(0,x.useEffect)(()=>{if(f(o),a){let e=o.find(e=>e._id===a);e||j({getNewerPosts:!0,lastPostDate:u})}},[o,f,a,u,j]),(0,n.jsxs)("div",{className:"grid grid-cols-[300px_1fr] h-screen max-h-screen",children:[(0,n.jsxs)("div",{className:"flex flex-col text-white overflow-hidden",children:[(0,n.jsxs)("div",{className:"bg-slate-800 px-2",children:[(0,n.jsx)(m.T,{}),(0,n.jsx)(d(),{href:"/post/new",className:"btn",children:"블로그 작성"}),(0,n.jsxs)(d(),{href:"/token-topup",className:"block mt-2 text-center",children:[(0,n.jsx)(i.G,{icon:r.owJ,className:"text-yellow-500"}),(0,n.jsxs)("span",{className:"pl-1",children:[t," 캐시 "]})]})]}),(0,n.jsxs)("div",{className:"px-4 flex-1 overflow-auto bg-gradient-to-b from-slate-800 to-cyan-800",children:[b.map(e=>(0,n.jsx)(d(),{href:"/post/".concat(e._id),className:"py-1 border border-white/0 block text-ellipsis overflow-hidden whitespace-nowrap my-1 px-2 bg-white/10 cursor-pointer rounded-sm ".concat(a===e._id?"bg-white/20 border-white":""),children:e.topic},e._id)),!N&&(0,n.jsx)("div",{onClick:()=>{j({lastPostDate:b[b.length-1].created})},className:"hover:underline text-sm text-slate-400 text-center cursor-pointer mt-4",children:"Load more posts"})]}),(0,n.jsx)("div",{className:"bg-cyan-800 flex items-center gap-2 border-t border-t-black/50 h-20 px-2",children:p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"min-w-[50px]",children:(0,n.jsx)(c(),{src:p.picture,alt:p.name,height:50,width:50,className:"min-w-[50px] rounded-full"})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-bold",children:p.email}),(0,n.jsx)(d(),{className:"text-sm",href:"/api/auth/logout",children:"Logout"})]})]}):(0,n.jsx)(d(),{href:"/api/auth/login",children:"Login"})})]}),s]})}},8773:function(e,s,t){"use strict";t.d(s,{T:function(){return i}});var n=t(5893),l=t(9417),r=t(7814);let i=()=>(0,n.jsxs)("div",{className:"text-2xl text-center py-4 font-heading font-bold",children:["블로그 자동화",(0,n.jsx)(r.G,{icon:l.M_6,className:"ml-1 text-2xl text-slate-400"})]})},7834:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return d},default:function(){return x}});var n=t(5893),l=t(9417),r=t(7814),i=t(1163),o=t(7294),c=t(8567),a=t(9307),d=!0;function x(e){console.log("PROPS: ",e);let s=(0,i.useRouter)(),[t,c]=(0,o.useState)(!1),{deletePost:d}=(0,o.useContext)(a.Z),x=async()=>{try{let t=await fetch("/api/deletePost",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({postId:e.id})}),n=await t.json();n.success&&(d(e.id),s.replace("/post/new"))}catch(e){}};return(0,n.jsx)("div",{className:"overflow-auto h-full",children:(0,n.jsxs)("div",{className:"max-w-screen-sm mx-auto",children:[(0,n.jsx)("div",{className:"text-sm font-bold mt-6 p-2 bg-stone-200 rounded-sm",children:"SEO title and meta description"}),(0,n.jsxs)("div",{className:"p-4 my-2 border border-stone-200 rounded-md",children:[(0,n.jsx)("div",{className:"text-blue-600 text-2xl font-bold",children:e.title}),(0,n.jsx)("div",{className:"mt-2",children:e.metaDescription})]}),(0,n.jsx)("div",{className:"text-sm font-bold mt-6 p-2 bg-stone-200 rounded-sm",children:"Keywords"}),(0,n.jsx)("div",{className:"flex flex-wrap pt-2 gap-1",children:e.keywords.split(",").map((e,s)=>(0,n.jsxs)("div",{className:"p-2 rounded-full bg-slate-800 text-white",children:[(0,n.jsx)(r.G,{icon:l.olY})," ",e]},s))}),(0,n.jsx)("div",{className:"text-sm font-bold mt-6 p-2 bg-stone-200 rounded-sm",children:"Blog post"}),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:e.postContent||""}}),(0,n.jsxs)("div",{className:"my-4",children:[!t&&(0,n.jsx)("button",{className:"btn bg-red-600 hover:bg-red-700",onClick:()=>c(!0),children:"Delete post"}),!!t&&(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"p-2 bg-red-300 text-center",children:"Are you sure you want to delete this post? This action is irreversible"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)("button",{onClick:()=>c(!1),className:"btn bg-stone-600 hover:bg-stone-700",children:"cancel"}),(0,n.jsx)("button",{onClick:x,className:"btn bg-red-600 hover:bg-red-700",children:"confirm delete"})]})]})]})]})})}x.getLayout=function(e,s){return(0,n.jsx)(c.L,{...s,children:e})}}},function(e){e.O(0,[976,927,774,888,179],function(){return e(e.s=8197)}),_N_E=e.O()}]);